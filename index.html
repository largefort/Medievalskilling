<!DOCTYPE html>
<html>
<head>
  <title>Medieval Idle Game</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <p>Wood: <span id="wood">0</span></p>
        <p>Stone: <span id="stone">0</span></p>
        <p>Gold Coins: <span id="gold">0</span></p>
      </div>
      <div class="col-sm">
        <button class="btn btn-primary" onclick="gather()">Gather</button>
        <button class="btn btn-primary" onclick="mine()">Mine</button>
        <button class="btn btn-primary" onclick="craft()">Craft</button>
        <button class="btn btn-primary" onclick="toggleAutoTrain()">Auto-Train</button>
      </div>
    </div>
  </div>
  <div class="modal" id="tutorialModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Tutorial</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <p id="tutorialText"></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="nextTutorial()">Next</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    let wood = 0;
    let stone = 0;
    let gold = 0;
    let autoTrainInterval;

    let tutorialSteps = [
      'Welcome to the Medieval Idle Skilling Game! Let\'s get started!',
      'First, you need to gather resources. Click the "Gather" button to collect wood.',
      'Now try mining. Click the "Mine" button to gather stone.',
      'You can also craft items to earn gold coins. Click the "Craft" button.',
      'Want to train automatically? Click the "Auto-Train" button.',
      'That\'s it! Enjoy the game!'
    ];
    let currentTutorialStep = 0;

    function gather() {
      wood++;
      document.getElementById('wood').innerText = wood;
    }

    function mine() {
      stone++;
      document.getElementById('stone').innerText = stone;
    }

    function craft() {
      if (wood >= 5 && stone >= 5) {
        wood -= 5;
        stone -= 5;
        gold++;
        document.getElementById('wood').innerText = wood;
        document.getElementById('stone').innerText = stone;
        document.getElementById('gold').innerText = gold;
      }
    }

    function toggleAutoTrain() {
      if (autoTrainInterval) {
        clearInterval(autoTrainInterval);
        autoTrainInterval = null;
      } else {
        autoTrainInterval = setInterval(() => {
          gather();
          mine();
          craft();
        }, 1000);
      }
    }

    function showTutorial() {
      $('#tutorialModal').modal('show');
      document.getElementById('tutorialText').innerText = tutorialSteps[currentTutorialStep];
    }

    function nextTutorial() {
      currentTutorialStep++;
      if (currentTutorialStep >= tutorialSteps.length) {
        $('#tutorialModal').modal('hide');
      } else {
        document.getElementById('tutorialText').innerText = tutorialSteps[currentTutorialStep];
      }
    }

    window.onload = function() {
      if (!localStorage.getItem('tutorialCompleted')) {
        showTutorial();
        localStorage.setItem('tutorialCompleted', true);
      }
    };
  </script>
</body>
</html>
